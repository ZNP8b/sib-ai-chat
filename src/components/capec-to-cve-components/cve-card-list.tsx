import { CapecToCveSkeleton } from '@/components/capec-to-cve-components/capec-to-cve-skeleton.tsx'
import { For, Stack, Text } from '@chakra-ui/react'
import { CveCard } from '@/components/capec-to-cve-components/cve-card.tsx'
import { NvdCveResponse } from '@/components/capec-to-cve-components/types.tsx'
import { UseMutationResult } from '@tanstack/react-query'
import { AxiosResponse } from 'axios'

export function CveCardList({
  CVEs,
  mutation,
}: {
  CVEs: NvdCveResponse | undefined
  mutation: UseMutationResult<AxiosResponse<any, any>, Error, string, unknown>
}) {
  return (
    <Stack
      marginTop='30px'
      gap='4'
      direction='row'
      wrap='wrap'
      justify='center'
    >
      {mutation.isPending && <CapecToCveSkeleton />}

      {CVEs?.totalResults === 0 && !mutation.isPending && (
        <Text>Ничего не найдено</Text>
      )}

      {!mutation.isPending && (
        <For each={CVEs?.vulnerabilities}>
          {(cve, index) => <CveCard cve={cve.cve} key={cve.cve.id + index} />}
        </For>
      )}
    </Stack>
  )
}
